
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="XGHeaven&#39;s Blog">
    <title>归档: 2021 - XGHeaven&#39;s Blog</title>
    <meta name="author" content="XGHeaven">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta property="og:type" content="blog">
<meta property="og:title" content="XGHeaven&#39;s Blog">
<meta property="og:url" content="https://blog.xgheaven.com/archives/2021/index.html">
<meta property="og:site_name" content="XGHeaven&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="XGHeaven">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@XGHeaven">
    
    
        
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/f34474afe04544ffbe944a804f0ae762?s=640"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-mhhgzztqkaub4zd4cl8bd83f7mgh9j6njnhilft4hamhrjsliqyzwo2cfzdk.min.css">

    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-71388235-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    
    <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?9894361f828b64144ac1f2ac0c58c300";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/%20">XGHeaven&#39;s Blog</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="https://www.gravatar.com/avatar/f34474afe04544ffbe944a804f0ae762?s=90"/>
        
        </a>
    
</header>
            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="1">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/f34474afe04544ffbe944a804f0ae762?s=110"/>
            </a>
            <span class="sidebar-profile-name">XGHeaven</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/%20"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">首页</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">分类</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">标签</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">归档</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">关于</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/friend-link"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-link"></i>
                    <span class="sidebar-button-desc">友情链接</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/XGHeaven" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://twitter.com/xgheaven" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
                    <span class="sidebar-button-desc">Twitter</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://facebook.com/xgheaven" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-facebook"></i>
                    <span class="sidebar-button-desc">Facebook</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://www.linkedin.com/xgheaven/" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
                    <span class="sidebar-button-desc">LinkedIn</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="mailto:xgheaven@gmail.com" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">邮箱</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/atom.xml"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/changelog"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-line-chart"></i>
                    <span class="sidebar-button-desc">Changelog</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    

<section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2021/01/02/the-quick-start-about-develop-nfc-in-mini-program/">
                            NFC 开发相关知识入门（小程序）
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" content="Sat Jan 02 2021 00:00:00 GMT+0800">
	
		    1月 02, 2021
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">小程序</a>


    
</div>
            </div>
            
                <div class="postShorten-thumbnailimg postShorten-thumbnailimg--bottom">
                    <img alt="" itemprop="image" src="https://blog.xgheaven.com/2021/01/02/the-quick-start-about-develop-nfc-in-mini-program/cover.jpeg"/>
                </div>
                
            
            
                <div class="postShorten-content" itemprop="articleBody">
                    <blockquote>
<p>本文主要是以「飞书」小程序为准，兼容「微信」小程序，如果没有了解过「飞书」的同学，可以<a target="_blank" rel="noopener" href="https://www.feishu.cn/">点击此处</a>去官网了解</p>
</blockquote>
<h2 id="什么是-NFC"><a href="#什么是-NFC" class="headerlink" title="什么是 NFC"></a>什么是 NFC</h2><p><strong>近距离无线通信</strong>（英语：Near-field communication，NFC），又简称<strong>近距离通信</strong>或<strong>近场通信</strong>，是一套通信协议，让两个电子设备（其中一个通常是移动设备，例如智能手机）在相距几厘米之内进行通信。</p>
<p>近场通信技术由非接触式射频识别（RFID）演变而来，由飞利浦半导体（现恩智浦半导体，缩写 NXP）、诺基亚和索尼共同于2004年研制开发，其基础是RFID及互连技术。近场通信是一种短距高频的无线电技术，在13.56MHz频率运行于20厘米距离内。其传输速度有106 Kbit/秒、212 Kbit/秒或者424 Kbit/秒三种。</p>
<p>NFC 其实在刚诞生的时候我就一直在关注，但是不仅仅应用少，而且搭载的设备也少，甚至小米还出现过前一代搭载 NFC 后一代却不搭载的神奇情况。除此之外，使用起来也是特别复杂，想当初，要用 NFC 去实现刷公交卡，你需要去换一个特殊的 SIM 卡才能够支持（当初不理解，现在想来大概率是因为安全问题）。</p>
<p>在现在，随着安卓厂商的不懈努力，现在不论是应用还是设备的安装率都已经逐渐普及开来。从最初 NFC 也就能在支付宝中扫银行卡快速输入卡号，到现在的公交刷卡、X Pay，甚至传输文件，华为甚至给这个东西换了个名字叫做一碰系统（率感无语）。</p>
<p>除此之外，还能推进智能化的发展。比如以后家庭中加入了一个新设备，那么不再需要繁杂的联网过程，直接扫一下机器身上的 NFC 识别码就可以直接将设备加入到家庭网络中。或者说华为路由器上的一碰连接 Wifi 我觉得就是一个极好的应用。当家里来客人的时候，就不再需要一个人一个人的输入密码了。</p>
<h2 id="NFC-技术一览"><a href="#NFC-技术一览" class="headerlink" title="NFC 技术一览"></a>NFC 技术一览</h2><h3 id="运行模式"><a href="#运行模式" class="headerlink" title="运行模式"></a><strong>运行模式</strong></h3><p>NFC 现在主要有三种运行模式，分别是<strong>卡模拟模式</strong>（Card Emulation Mode）、<strong>主机模拟模式</strong>（Host Emulation Mode）、<strong>读卡写卡模式</strong>（Reader/Writer Mode）、<strong>P2P 模式</strong>（P2P Mode）</p>
<p><strong>卡模拟模式</strong></p>
<ul>
<li><p>NFC手机可以模拟成为一张非接触卡，通过 POS 机（非接触读卡器）的 RF 来供电，即使 NFC 手机没电也可以工作。</p>
</li>
<li><p>现在很常见的比如 Apple Pay，BYD NFC 钥匙，都是能够实现在断电情况下的刷卡</p>
</li>
</ul>
<img src="/2021/01/02/the-quick-start-about-develop-nfc-in-mini-program/7d10579f-6855-49b3-adca-4a1d4ffe1b6e.png" class="">
<p><strong>主机模拟模式</strong></p>
<ul>
<li><p>该模式与卡模拟模式很类似，只不过卡模拟无需供电或者说无需 App 的参与就可以完成，但是主机模拟模式是不行的，他是通过将所有的消息转发给应用，由应用去决定该模拟什么内容，也就说该返回什么内容</p>
</li>
<li><p>现阶段很多支付钱包，比如云闪付、京东闪付等等都是通过该模式实现的。</p>
</li>
</ul>
<img src="/2021/01/02/the-quick-start-about-develop-nfc-in-mini-program/32aa547c-ce6a-40e1-8b2c-454dba2caa87.png" class="">
<p><strong>读卡写卡模式</strong></p>
<ul>
<li><p>NFC手机可以通过触碰NFC标签（Tag），从中读取非接触标签中的内容，采集数据并发送到对应的应用进行处理。</p>
</li>
<li><p>最常见的应用其实就是华为的一碰系列，除此之外，支付宝支持直接读取信用卡、储蓄卡的卡号。</p>
</li>
</ul>
<img src="/2021/01/02/the-quick-start-about-develop-nfc-in-mini-program/2a9b4dd4-545c-43c5-8b37-104f9ea93403.png" class="">
<p><strong>P2P 模式</strong></p>
<ul>
<li><p>两个NFC设备可以近距离内互相连接，直接传递数据，实现点对点数据传输。</p>
</li>
<li><p>例如协助快速建立蓝牙连接、交换手机名片和数据通信等。</p>
</li>
<li><p>最常见的是手机互传、Android Beam。</p>
</li>
</ul>
<img src="/2021/01/02/the-quick-start-about-develop-nfc-in-mini-program/6830ab77-4423-45d4-a4f2-30703d8ace5a.png" class="">
<h3 id="协议标准类型"><a href="#协议标准类型" class="headerlink" title="协议标准类型"></a><strong>协议标准类型</strong></h3><p>因为 NFC 的发展过程的原因，曾经出现过多个协议，甚至每家公司都有不同的协议内容。但现在主要是有一下几个协议标准：</p>
<p><strong>ISO / IEC</strong></p>
<p>主要定义了一下几个协议：</p>
<ul>
<li><p>ISO/IEC 18092 / ECMA-340— (NFCIP-1)</p>
<p>Near Field Communication Interface and Protocol-1</p>
</li>
<li><p>ISO/IEC 21481 / ECMA-352— (NFCIP-2)</p>
<p>Near Field Communication Interface and Protocol-2</p>
</li>
</ul>
<p>除此以外，还有一个协议标准很常用，是 ISO-14443 协议，其实这个协议是 RFID 的协议，和上面的唯一区别就是上面的多了一些其他模式的标准，比如点对点模式。</p>
<p>ISO-14443 协议有两个子类，分别是 Type-A 和 Type-B，这两个在 Android 也被称为 NFC-A 和 NFC-B。</p>
<p>但不幸的是，这些协议也不能免费看，要花钱的</p>
<p><strong>NFC Forum</strong></p>
<p><a target="_blank" rel="noopener" href="https://nfc-forum.org/">NFC Forum</a> 是一个在 2004 年创建的非盈利行业协会，其成员来自NFC生态系统的各个部分。另外我主要关注了下国内公司，比较知名的有小米、中国移动通讯。</p>
<p>但是你想要从该组织获取任何关于 NFC 相关的技术标准，首先你的公司要成为该组织的成员才行，因为字节根本不在该组织，所以没法从这里获得一手的信息。</p>
<p>不过办法也是有的，该协会的创办者 NXP 公司网站上是有相关的数据资源，后文的参考此资源。</p>
<p><strong>其他</strong></p>
<p>不用管.jpg</p>
<h3 id="沟通协议"><a href="#沟通协议" class="headerlink" title="沟通协议"></a><strong>沟通协议</strong></h3><p>以 NFC-A 为例</p>
<img src="/2021/01/02/the-quick-start-about-develop-nfc-in-mini-program/f4d39ae5-9c5e-4f4e-8b22-9cbc17cedd14.png" class="">
<p>整个 NFC 卡片其实内部就是一个有限状态机，根据当前不同的状态需要不同的操作。这个图看起来很复杂，其实主要额外包含了两个操作：</p>
<ul>
<li><p>密码校验</p>
<ul>
<li><p>这个是说 NFC 卡是经过加密的，只有在密码校验通过之后，才能够进行相关的操作。</p>
</li>
<li><p>有一点特殊的是，NFC 的密码长度其实是固定的，即 32 位，4 个字节。</p>
</li>
</ul>
</li>
<li><p>防冲突</p>
<ul>
<li><p>之所有有这个设计，是因为在使用过程中，可能会出现同时扫描到多个 NFC 设备的情况，此时就需要通过 READY1/READY2 两个状态来选择正确的 NFC 设备进行操作。</p>
</li>
<li><p>每个卡片都有一个唯一 UID，长度为 7 字节，而每次操作只能选择 4 个字节，所以不得不拆分成两个状态两步去操作。</p>
</li>
</ul>
</li>
</ul>
<p>当没有上面两个操作的时候，可以简单的执行 IDLE -&gt; ACTIVE -&gt; HALT 的状态流程，也就是说连接、操作（也就是读写）、关闭。</p>
<h3 id="存储设计"><a href="#存储设计" class="headerlink" title="存储设计"></a><strong>存储设计</strong></h3><p>NFC 在存储上设计了页的概念，一个页表示 4 个字节，以页为最小单位进行操作。所以 NFC 卡片的存储容量其实都是 4 的整数倍。</p>
<p>这里以 NTAG213 180 字节的存储结构为例</p>
<img src="/2021/01/02/the-quick-start-about-develop-nfc-in-mini-program/d818bba2-d78d-48eb-aae8-94d54e0ed449.png" class="">
<p>这里只需要关注两点：</p>
<ul>
<li><p>用户数据存储的空间是从第四页开始</p>
</li>
<li><p>用户可存储空间其实只有 144 字节</p>
</li>
</ul>
<p>只需要记住这两点，在开发 NFC 需求的时候，不要去修改非用户空间的数据，不要存储过长的内容。</p>
<h2 id="设备准备"><a href="#设备准备" class="headerlink" title="设备准备"></a>设备准备</h2><p>在有了上面的基础之后，别急你还是不能开始开发 NFC，因为你还缺少至关重要的一个东西，设备</p>
<p>遗憾的是，不是所有的设备都有 NFC 硬件的，也不是说有了 NFC 硬件就能用的</p>
<ul>
<li><p>苹果设备只有升级到 iOS 13 以上才能具有开发 NFC 读卡器的能力，不能写入，除此之外，几乎没有其他的 NFC 能力可以使用。机圈也会叫做阉割版 NFC。（暂时没有能力去调研 NFC 的能力一定是需要硬件支持还是说只是软件限制）</p>
</li>
<li><p>安卓设备理论上可以使用几乎所有的 NFC 能力，机圈内叫全功能 NFC，包括读卡、写卡、卡模拟、P2P 等模式。但是不同的手机有着不同的操作系统的限制，所以要选择一个合适的操作系统（原生安卓、类原生安卓是最推荐的）。</p>
</li>
</ul>
<p>所以，请准备好一台安卓手机！</p>
<h2 id="NFC-卡片"><a href="#NFC-卡片" class="headerlink" title="NFC 卡片"></a>NFC 卡片</h2><p>在有了设备之后，还要选择正确的 NFC 卡片，因为不是任意一个 NFC 卡片都是可以用的，比如工牌、银行卡等等。这是因为 NFC 卡片是带有加密的，在操作之前必须要通过验证才能操作，所以建议去淘宝买一些可读可写无加密的 NFC 贴纸用于测试。</p>
<p>不过你在淘宝上买的可能是写着 NTAG213 的型号，其实这个是 NXP 出的一款设备，但是支持兼容 ISO NFC-A 协议以及 NFC Forum Type 2 协议，所以大家可以放心使用。</p>
<p>当然了，你也可能看到 NTAG215/NTAG216，这两个都没有任何区别，只是存储空间不同而已。</p>
<img src="/2021/01/02/the-quick-start-about-develop-nfc-in-mini-program/9593b7a1-4bec-492e-8d87-ebf66c65e8b2.png" class="">
<h2 id="小程序-API"><a href="#小程序-API" class="headerlink" title="小程序 API"></a>小程序 API</h2><p>此时在有了上述的基础知识后，别急，还要了解下小程序的 API 才能更好的开发。</p>
<p>就目前来说，所有与 NFC 相关的操作都被封装到了 <code>NfcAdaptar</code> 类中，通过 <code>tt.getNFCAdaptar()</code> 获取 <code>nfcAfaptar</code> 对象。</p>
<blockquote>
<p>具体的 API 参数细节请参考「<a target="_blank" rel="noopener" href="https://open.feishu.cn/document/uYjL24iN/ugTN4YjL4UDO24CO1gjN">飞书开放平台</a>」</p>
</blockquote>
<h3 id="NFC-整体流程"><a href="#NFC-整体流程" class="headerlink" title="NFC 整体流程"></a><strong>NFC 整体流程</strong></h3><ul>
<li><p>注册 NFC 发现事件回调 <code>nfcAdaptar.onDiscovered</code></p>
</li>
<li><p>开启 NFC 扫描 <code>nfcAdaptar.startDiscovered</code></p>
</li>
<li><p>NFC 卡片贴近设备</p>
</li>
<li><p>触发回调，通过回调可以获得 NFC 支持的协议</p>
<ul>
<li>回调参数内的 techs 字段可以用于判断当前卡片支持的协议</li>
</ul>
</li>
<li><p>根据协议去读写 NFC 卡片内容 <code>nfcAdaptar.getNfcA()</code></p>
</li>
<li><p>关闭 NFC 扫描，关闭事件监听 <code>nfcAdaptar.offDiscovered</code> / <code>nfcAdaptar.stopDiscovered()</code></p>
</li>
</ul>
<p>可以发现这个流程非常容易理解，也非常容易操作。那么接下来我们看下重头戏</p>
<h3 id="读写-NFC-卡片"><a href="#读写-NFC-卡片" class="headerlink" title="读写 NFC 卡片"></a><strong>读写 NFC 卡片</strong></h3><p>这里以 NFC-A 协议为主</p>
<p>通过 <code>nfcAdaptar.getNfcA()</code> 获取操作 NFC-A 卡片的操作类实例 nfca，流程如下</p>
<ul>
<li><p>连接卡片 <code>nfca.connect()</code></p>
</li>
<li><p>读写卡片 <code>nfca.transceive()</code></p>
</li>
<li><p>读写完成之后关闭连接 <code>nfca.close()</code></p>
</li>
</ul>
<p>关键点来了，NFC 卡片的读写不和其他的 IO 设备类似，有专门的 read 和 write 函数。对 NFC 来说，通过给 NFC 卡片发送不同的指令来做到完成不用的操作。</p>
<p>这些指令都在 NTAG213 文档中有写，这里简单列一下常用的数据</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>代码</th>
<th>功能</th>
<th>参数</th>
</tr>
</thead>
<tbody>
<tr>
<td>Read</td>
<td>0x30</td>
<td>一次读取四个页的数据</td>
<td><code>&lt;Addr:1B&gt;</code></td>
</tr>
<tr>
<td>Write</td>
<td>0xA2</td>
<td>一次写入一个页的数据</td>
<td><code>&lt;Addr:1B&gt; &lt;Data:4B&gt;</code></td>
</tr>
<tr>
<td>Fast Read</td>
<td>0x3A</td>
<td>一次读取多个页的数据</td>
<td><code>&lt;StartAddr:1B&gt; &lt;StopAddr:1B&gt;</code></td>
</tr>
</tbody>
</table>
<p>比如我要读取第四页的数据，可以写如下代码</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nfca.<span class="title function_">transceive</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="keyword">new</span> <span class="title class_">Uint8Array</span>([<span class="number">0x30</span>, <span class="number">0x04</span>]).<span class="property">buffer</span>, <span class="comment">// 必须要传入 ArrayBuffer</span></span><br><span class="line">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// res.data 是 ArrayBuffer，转成数组方便查看</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Uint8Array</span>(res.<span class="property">data</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>根据协议，其实还要传 <a href="CRC:2B">CRC:2B</a>，也就是校验位，不过这个操作已经由 Android 去做掉了，所以就不需要传了，也不需要去了解校验算法</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>至此，NFC 开发算是入门了，不过这里要注意不同的 NFC 卡片不同的协议会有不同的读写方式，这里要根据你们各自具体的卡片来看。而且有的还有密码保护，还需要额外再走校验的逻辑。</p>
<h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><ul>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/xiaozy115/article/details/103171143">NFC 简介 - CSDN</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://bitexperts.com/Question/Detail/3360/difference-between-iso-14443-and-iso-18092-i-e-rfid-vs-nfc">Difference between ISO 14443 and ISO 18092, i.e. RFID vs NFC</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.nxp.com.cn/docs/en/data-sheet/NTAG213_215_216.pdf">NTAG213 协议文档</a></p>
</li>
</ul>

                    
                        

                    
                    
                        <p>
                            <a href="/2021/01/02/the-quick-start-about-develop-nfc-in-mini-program/#post-footer" class="postShorten-excerpt_link link">
                                注释和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">第 1 页 共 1 页</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2024 XGHeaven. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.gravatar.com/avatar/f34474afe04544ffbe944a804f0ae762?s=110"/>
        
            <h4 id="about-card-name">XGHeaven</h4>
        
            <h5 id="about-card-bio"><p>一个弱弱的码农</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>杭州电子科技大学学生一枚</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Weifang Shandong, China
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/static/images/20170217-TombRaider.jpg');"></div>
    </body>
    <!--SCRIPTS-->

<script src="/assets/js/scrip-z6xcdnzggiy56kzp83ux5nnbwra1acrauxruz3kdi3u5xladb6jh4n3ylebm.min.js"></script>

<!--SCRIPTS END-->



</html>
